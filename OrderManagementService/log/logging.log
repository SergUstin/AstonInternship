15:02:33.293 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 116764 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:02:33.299 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:02:33.300 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:02:33.719 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:02:33.761 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
15:02:34.119 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:02:34.127 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:02:34.127 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:02:34.169 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:02:34.169 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 834 ms
15:02:34.256 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:02:34.382 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
15:02:34.384 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:02:34.487 [main] INFO  liquibase.database - Set default schema name to public
15:02:34.586 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:02:34.592 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:02:34.704 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение fk_order_item_order_id в отношении таблица order_item
15:02:34.779 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:02:34.786 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:02:34.788 [main] INFO  liquibase.command - Command execution complete
15:02:34.982 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:02:35.463 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:02:35.782 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:02:35.783 [main] INFO  liquibase.command - Using deploymentId: 9121755783
15:02:35.784 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:02:35.845 [main] INFO  liquibase.changelog - Table order created
15:02:35.846 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 49ms
15:02:35.880 [main] INFO  liquibase.changelog - Table order_item created
15:02:35.882 [main] INFO  liquibase.changelog - Foreign key constraint added to order_item (order_id)
15:02:35.883 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::you ran successfully in 31ms
15:02:35.886 [main] INFO  liquibase.util - UPDATE SUMMARY
15:02:35.887 [main] INFO  liquibase.util - Run:                          2
15:02:35.887 [main] INFO  liquibase.util - Previously run:               0
15:02:35.887 [main] INFO  liquibase.util - Filtered out:                 0
15:02:35.887 [main] INFO  liquibase.util - -------------------------------
15:02:35.887 [main] INFO  liquibase.util - Total change sets:            2
15:02:35.887 [main] INFO  liquibase.util - Update summary generated
15:02:35.888 [main] INFO  liquibase.command - Update command completed successfully.
15:02:35.890 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:02:35.890 [main] INFO  liquibase.command - Command execution complete
15:02:35.939 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:02:35.978 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:02:36.006 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:02:36.180 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:02:36.902 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:02:36.904 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:02:37.095 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:02:37.253 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'handlerExceptionResolver' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception with message: Ambiguous @ExceptionHandler method mapped for [class java.lang.RuntimeException]: {public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleUpdateException(java.lang.RuntimeException), public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleCreationException(java.lang.RuntimeException)}
15:02:37.253 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:02:37.255 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:02:37.257 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:02:37.259 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
15:02:37.268 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
15:02:37.280 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'handlerExceptionResolver' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception with message: Ambiguous @ExceptionHandler method mapped for [class java.lang.RuntimeException]: {public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleUpdateException(java.lang.RuntimeException), public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleCreationException(java.lang.RuntimeException)}
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception with message: Ambiguous @ExceptionHandler method mapped for [class java.lang.RuntimeException]: {public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleUpdateException(java.lang.RuntimeException), public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleCreationException(java.lang.RuntimeException)}
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	... 19 common frames omitted
Caused by: java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class java.lang.RuntimeException]: {public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleUpdateException(java.lang.RuntimeException), public org.springframework.http.ResponseEntity com.company.ordermanagementservice.config.OrderControllerAdvice.handleCreationException(java.lang.RuntimeException)}
	at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:114)
	at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.<init>(ExceptionHandlerMethodResolver.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache(ExceptionHandlerExceptionResolver.java:289)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.afterPropertiesSet(ExceptionHandlerExceptionResolver.java:256)
	at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.addDefaultHandlerExceptionResolvers(WebMvcConfigurationSupport.java:1063)
	at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.handlerExceptionResolver(WebMvcConfigurationSupport.java:1005)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 20 common frames omitted
15:07:38.900 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 124260 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:07:38.902 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:07:38.903 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:07:39.340 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:07:39.381 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
15:07:39.753 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:07:39.762 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:07:39.762 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:07:39.807 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:07:39.807 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 859 ms
15:07:39.892 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:07:40.021 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@26f0141
15:07:40.022 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:07:40.128 [main] INFO  liquibase.database - Set default schema name to public
15:07:40.214 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:07:40.219 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:07:40.336 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение fk_order_item_order_id в отношении таблица order_item
15:07:40.416 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:07:40.422 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:07:40.424 [main] INFO  liquibase.command - Command execution complete
15:07:40.615 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:07:40.654 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:07:40.733 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:07:40.734 [main] INFO  liquibase.command - Using deploymentId: 9122060734
15:07:40.735 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:07:40.853 [main] INFO  liquibase.changelog - Table order created
15:07:40.854 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 100ms
15:07:40.894 [main] INFO  liquibase.changelog - Table order_item created
15:07:40.897 [main] INFO  liquibase.changelog - Foreign key constraint added to order_item (order_id)
15:07:40.898 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::you ran successfully in 36ms
15:07:40.903 [main] INFO  liquibase.util - UPDATE SUMMARY
15:07:40.903 [main] INFO  liquibase.util - Run:                          2
15:07:40.903 [main] INFO  liquibase.util - Previously run:               0
15:07:40.903 [main] INFO  liquibase.util - Filtered out:                 0
15:07:40.903 [main] INFO  liquibase.util - -------------------------------
15:07:40.903 [main] INFO  liquibase.util - Total change sets:            2
15:07:40.903 [main] INFO  liquibase.util - Update summary generated
15:07:40.904 [main] INFO  liquibase.command - Update command completed successfully.
15:07:40.906 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:07:40.907 [main] INFO  liquibase.command - Command execution complete
15:07:40.956 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:07:40.996 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:07:41.021 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:07:41.207 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:07:41.954 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:07:41.956 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:07:42.148 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:07:42.452 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:07:42.459 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.953 seconds (process running for 4.456)
15:11:11.501 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:11:11.501 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:11:11.502 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
15:11:11.525 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderController - GET /api/orders
15:11:11.647 [http-nio-8081-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42601
15:11:11.647 [http-nio-8081-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: ошибка синтаксиса (примерное положение: "order")
  Позиция: 98
15:11:11.655 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JDBC exception executing SQL [select o1_0.id,o1_0.payment_status,o1_0.registration_date,o1_0.shipment_status,o1_0.user_id from order o1_0] [ОШИБКА: ошибка синтаксиса (примерное положение: "order")
  Позиция: 98] [n/a]; SQL [n/a]
15:14:01.994 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:14:01.995 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:14:01.998 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:16:29.045 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 124912 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:16:29.046 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:16:29.047 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:16:29.457 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:16:29.498 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
15:16:29.860 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:16:29.869 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:16:29.869 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:16:29.910 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:16:29.910 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 834 ms
15:16:30.006 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:16:30.147 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@34136bd1
15:16:30.148 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:16:30.255 [main] INFO  liquibase.database - Set default schema name to public
15:16:30.354 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:16:30.360 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:16:30.471 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение fk_order_item_order_id в отношении таблица order_item
15:16:30.547 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:16:30.554 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:16:30.556 [main] INFO  liquibase.command - Command execution complete
15:16:30.746 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:16:30.789 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:16:30.853 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:16:30.854 [main] INFO  liquibase.command - Using deploymentId: 9122590853
15:16:30.855 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:16:30.908 [main] INFO  liquibase.changelog - Table orders created
15:16:30.909 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 39ms
15:16:30.921 [main] INFO  liquibase.changelog - Table order_items created
15:16:30.923 [main] INFO  liquibase.changelog - Foreign key constraint added to order_items (order_id)
15:16:30.924 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 9ms
15:16:30.927 [main] INFO  liquibase.util - UPDATE SUMMARY
15:16:30.928 [main] INFO  liquibase.util - Run:                          2
15:16:30.928 [main] INFO  liquibase.util - Previously run:               0
15:16:30.928 [main] INFO  liquibase.util - Filtered out:                 0
15:16:30.928 [main] INFO  liquibase.util - -------------------------------
15:16:30.928 [main] INFO  liquibase.util - Total change sets:            2
15:16:30.928 [main] INFO  liquibase.util - Update summary generated
15:16:30.929 [main] INFO  liquibase.command - Update command completed successfully.
15:16:30.931 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:16:30.931 [main] INFO  liquibase.command - Command execution complete
15:16:30.977 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:16:31.020 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:16:31.047 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:16:31.222 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:16:31.933 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:16:31.935 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:16:32.128 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:16:32.438 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:16:32.446 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.757 seconds (process running for 4.255)
15:16:37.706 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:16:37.706 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:16:37.708 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
15:16:37.731 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderController - GET /api/orders
15:16:37.838 [http-nio-8081-exec-2] INFO  c.c.o.service.impl.OrderServiceImpl - Retrieved 0 orders from the database
15:17:59.123 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=1, items=null, paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED, registrationDate=null)
15:17:59.125 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: Cannot invoke "java.util.List.stream()" because the return value of "com.company.ordermanagementservice.dto.OrderDTO.getItems()" is null
15:18:28.927 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=1, items=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED, registrationDate=null)
15:18:28.963 [http-nio-8081-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
15:18:28.963 [http-nio-8081-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: значение NULL в столбце "id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (null, 1, PENDING, NOT_SHIPPED, 2024-02-28 15:18:28.950119).
15:18:28.970 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: значение NULL в столбце "id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (null, 1, PENDING, NOT_SHIPPED, 2024-02-28 15:18:28.950119).] [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; SQL [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; constraint [null]
15:21:43.700 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:21:43.702 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:21:43.707 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:21:45.754 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 116056 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:21:45.756 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:21:45.756 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:21:46.162 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:21:46.205 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
15:21:46.570 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:21:46.578 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:21:46.579 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:21:46.620 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:21:46.620 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 832 ms
15:21:46.706 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:21:46.939 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@11f23038
15:21:46.940 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:21:47.040 [main] INFO  liquibase.database - Set default schema name to public
15:21:47.129 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:21:47.134 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:21:47.321 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:21:47.329 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:21:47.330 [main] INFO  liquibase.command - Command execution complete
15:21:47.505 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:21:47.519 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:21:47.576 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:21:47.576 [main] INFO  liquibase.command - Using deploymentId: 9122907576
15:21:47.577 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:21:47.623 [main] INFO  liquibase.changelog - Table orders created
15:21:47.623 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 28ms
15:21:47.659 [main] INFO  liquibase.changelog - Table order_items created
15:21:47.661 [main] INFO  liquibase.changelog - Foreign key constraint added to order_items (order_id)
15:21:47.662 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 33ms
15:21:47.666 [main] INFO  liquibase.util - UPDATE SUMMARY
15:21:47.666 [main] INFO  liquibase.util - Run:                          2
15:21:47.666 [main] INFO  liquibase.util - Previously run:               0
15:21:47.666 [main] INFO  liquibase.util - Filtered out:                 0
15:21:47.666 [main] INFO  liquibase.util - -------------------------------
15:21:47.666 [main] INFO  liquibase.util - Total change sets:            2
15:21:47.666 [main] INFO  liquibase.util - Update summary generated
15:21:47.667 [main] INFO  liquibase.command - Update command completed successfully.
15:21:47.669 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:21:47.669 [main] INFO  liquibase.command - Command execution complete
15:21:47.717 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:21:47.758 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:21:47.785 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:21:47.965 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:21:48.680 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:21:48.682 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:21:48.869 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:21:49.163 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:21:49.170 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.746 seconds (process running for 4.253)
15:21:53.787 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:21:53.787 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:21:53.788 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
15:21:53.869 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=1, items=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED, registrationDate=null)
15:21:53.920 [http-nio-8081-exec-2] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
15:23:37.990 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from String "название товара": not a valid representation
15:30:16.206 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:30:16.208 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:30:16.211 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:32:55.379 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 124176 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:32:55.380 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:32:55.381 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:32:55.814 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:32:55.857 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
15:32:56.231 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:32:56.239 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:32:56.239 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:32:56.279 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:32:56.279 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 866 ms
15:32:56.368 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:32:56.496 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@11f23038
15:32:56.497 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:32:56.598 [main] INFO  liquibase.database - Set default schema name to public
15:32:56.684 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:32:56.689 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:32:56.877 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:32:56.884 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:32:56.886 [main] INFO  liquibase.command - Command execution complete
15:32:57.067 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:32:57.100 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:32:57.159 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:32:57.160 [main] INFO  liquibase.command - Using deploymentId: 9123577159
15:32:57.161 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:32:57.234 [main] INFO  liquibase.changelog - Table orders created
15:32:57.235 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 57ms
15:32:57.261 [main] INFO  liquibase.changelog - Table order_items created
15:32:57.263 [main] INFO  liquibase.changelog - Foreign key constraint added to order_items (order_id)
15:32:57.264 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 24ms
15:32:57.267 [main] INFO  liquibase.util - UPDATE SUMMARY
15:32:57.268 [main] INFO  liquibase.util - Run:                          2
15:32:57.268 [main] INFO  liquibase.util - Previously run:               0
15:32:57.268 [main] INFO  liquibase.util - Filtered out:                 0
15:32:57.268 [main] INFO  liquibase.util - -------------------------------
15:32:57.268 [main] INFO  liquibase.util - Total change sets:            2
15:32:57.268 [main] INFO  liquibase.util - Update summary generated
15:32:57.269 [main] INFO  liquibase.command - Update command completed successfully.
15:32:57.271 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:32:57.271 [main] INFO  liquibase.command - Command execution complete
15:32:57.323 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:32:57.366 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:32:57.395 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:32:57.573 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:32:58.275 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:32:58.278 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:32:58.467 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:32:58.764 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:32:58.771 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.766 seconds (process running for 4.254)
15:33:11.460 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:33:11.460 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:33:11.461 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
15:33:11.540 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=null, quantity=2)
15:33:11.568 [http-nio-8081-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42P01
15:33:11.568 [http-nio-8081-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: отношение "order_item" не существует
  Позиция: 13
15:33:11.577 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: отношение "order_item" не существует
  Позиция: 13] [insert into order_item (item_name,quantity) values (?,?)]; SQL [insert into order_item (item_name,quantity) values (?,?)]
15:34:10.828 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:34:10.830 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:34:10.836 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:34:12.787 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 123404 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:34:12.789 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:34:12.789 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:34:13.229 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:34:13.269 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
15:34:13.647 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:34:13.656 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:34:13.657 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:34:13.699 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:34:13.699 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 873 ms
15:34:13.788 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:34:13.923 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8b13d91
15:34:13.925 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:34:14.029 [main] INFO  liquibase.database - Set default schema name to public
15:34:14.126 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:34:14.131 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:34:14.324 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:34:14.332 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:34:14.334 [main] INFO  liquibase.command - Command execution complete
15:34:14.507 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:34:14.554 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:34:14.652 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:34:14.653 [main] INFO  liquibase.command - Using deploymentId: 9123654653
15:34:14.654 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:34:14.791 [main] INFO  liquibase.changelog - Table orders created
15:34:14.792 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 126ms
15:34:14.833 [main] INFO  liquibase.changelog - Table order_items created
15:34:14.834 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 35ms
15:34:14.837 [main] INFO  liquibase.util - UPDATE SUMMARY
15:34:14.838 [main] INFO  liquibase.util - Run:                          2
15:34:14.838 [main] INFO  liquibase.util - Previously run:               0
15:34:14.838 [main] INFO  liquibase.util - Filtered out:                 0
15:34:14.838 [main] INFO  liquibase.util - -------------------------------
15:34:14.838 [main] INFO  liquibase.util - Total change sets:            2
15:34:14.838 [main] INFO  liquibase.util - Update summary generated
15:34:14.840 [main] INFO  liquibase.command - Update command completed successfully.
15:34:14.842 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:34:14.842 [main] INFO  liquibase.command - Command execution complete
15:34:14.894 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
15:34:14.932 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
15:34:14.958 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
15:34:15.131 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
15:34:15.823 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
15:34:15.826 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
15:34:16.011 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
15:34:16.305 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:34:16.312 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.906 seconds (process running for 4.438)
15:34:18.281 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:34:18.281 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:34:18.282 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
15:34:18.362 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=null, quantity=2)
15:34:18.392 [http-nio-8081-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42P01
15:34:18.393 [http-nio-8081-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: отношение "order_item" не существует
  Позиция: 13
15:34:18.401 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: отношение "order_item" не существует
  Позиция: 13] [insert into order_item (item_name,quantity) values (?,?)]; SQL [insert into order_item (item_name,quantity) values (?,?)]
15:36:26.101 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
15:36:26.103 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:36:26.105 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:36:29.189 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 128636 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:36:29.191 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:36:29.191 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:36:29.609 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:36:29.649 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
15:36:30.007 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:36:30.016 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:36:30.016 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:36:30.057 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:36:30.057 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 831 ms
15:36:30.140 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:36:30.268 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8b13d91
15:36:30.269 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:36:30.370 [main] INFO  liquibase.database - Set default schema name to public
15:36:30.456 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:36:30.461 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:36:30.651 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:36:30.658 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:36:30.660 [main] INFO  liquibase.command - Command execution complete
15:36:30.839 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:36:30.868 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:36:30.918 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:36:30.919 [main] INFO  liquibase.command - Using deploymentId: 9123790919
15:36:30.920 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:36:31.002 [main] INFO  liquibase.changelog - Table orders created
15:36:31.012 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin encountered an exception.
15:36:31.015 [main] INFO  liquibase.command - Update command encountered an exception.
15:36:31.016 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:36:31.016 [main] INFO  liquibase.command - Command execution complete
15:36:31.017 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
15:36:31.018 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:36:31.020 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:36:31.023 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
15:36:31.031 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
15:36:31.044 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 44 common frames omitted
Caused by: liquibase.exception.DatabaseException: ОШИБКА: отношение "public.order_items" не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: отношение "public.order_items" не существует
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 65 common frames omitted
15:38:51.220 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 128424 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
15:38:51.221 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
15:38:51.222 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
15:38:51.650 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
15:38:51.696 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.
15:38:52.062 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:38:52.070 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:38:52.070 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:38:52.111 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:38:52.111 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 850 ms
15:38:52.198 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
15:38:52.326 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6de7778f
15:38:52.327 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
15:38:52.432 [main] INFO  liquibase.database - Set default schema name to public
15:38:52.519 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:38:52.524 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
15:38:52.709 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
15:38:52.752 [main] WARN  liquibase.lockservice - Failed to release change log lock
15:38:52.754 [main] INFO  liquibase.command - Command execution complete
15:38:52.965 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
15:38:52.976 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:38:53.029 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
15:38:53.029 [main] INFO  liquibase.command - Using deploymentId: 9123933029
15:38:53.030 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
15:38:53.114 [main] INFO  liquibase.changelog - Table orders created
15:38:53.115 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 69ms
15:38:53.153 [main] INFO  liquibase.changelog - Table order_items created
15:38:53.156 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin encountered an exception.
15:38:53.158 [main] INFO  liquibase.command - Update command encountered an exception.
15:38:53.160 [main] INFO  liquibase.lockservice - Successfully released change log lock
15:38:53.160 [main] INFO  liquibase.command - Command execution complete
15:38:53.162 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderItemTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
15:38:53.162 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
15:38:53.165 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
15:38:53.168 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
15:38:53.178 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
15:38:53.194 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderItemTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderItemTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderItemTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::createOrderItemTable::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 44 common frames omitted
Caused by: liquibase.exception.DatabaseException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT "FK_order_id" FOREIGN KEY (id) REFERENCES public.order_items (order_id)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: столбец "order_id", указанный в ограничении внешнего ключа, не существует
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 65 common frames omitted
16:56:46.655 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 126028 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
16:56:46.657 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
16:56:46.657 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
16:56:47.080 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:56:47.123 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
16:56:47.484 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
16:56:47.492 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
16:56:47.492 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
16:56:47.534 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
16:56:47.535 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 847 ms
16:56:47.620 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
16:56:47.750 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@11f23038
16:56:47.751 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
16:56:47.853 [main] INFO  liquibase.database - Set default schema name to public
16:56:47.949 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
16:56:47.955 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
16:56:48.140 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
16:56:48.148 [main] WARN  liquibase.lockservice - Failed to release change log lock
16:56:48.149 [main] INFO  liquibase.command - Command execution complete
16:56:48.360 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
16:56:48.447 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
16:56:48.537 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
16:56:48.538 [main] INFO  liquibase.command - Using deploymentId: 9128608538
16:56:48.539 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
16:56:48.677 [main] INFO  liquibase.changelog - Table orders created
16:56:48.678 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 125ms
16:56:48.758 [main] INFO  liquibase.changelog - Table order_items created
16:56:48.758 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 76ms
16:56:48.762 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
16:56:48.762 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
16:56:48.767 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
16:56:48.769 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin encountered an exception.
16:56:48.771 [main] INFO  liquibase.command - Update command encountered an exception.
16:56:48.772 [main] INFO  liquibase.lockservice - Successfully released change log lock
16:56:48.773 [main] INFO  liquibase.command - Command execution complete
16:56:48.774 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
16:56:48.775 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
16:56:48.777 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
16:56:48.780 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
16:56:48.788 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
16:56:48.799 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 44 common frames omitted
Caused by: liquibase.exception.DatabaseException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам [Failed SQL: (0) ALTER TABLE public.order_items ADD CONSTRAINT order_items_fk FOREIGN KEY (id) REFERENCES public.orders (items_id)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: в целевой внешней таблице "orders" нет ограничения уникальности, соответствующего данным ключам
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 65 common frames omitted
17:00:16.114 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 113724 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:00:16.115 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:00:16.116 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:00:16.534 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:00:16.574 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
17:00:16.927 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:00:16.935 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:00:16.935 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:00:16.978 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:00:16.978 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 831 ms
17:00:17.062 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:00:17.195 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6a09484c
17:00:17.197 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:00:17.301 [main] INFO  liquibase.database - Set default schema name to public
17:00:17.389 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:00:17.395 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:00:17.584 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:00:17.591 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:00:17.592 [main] INFO  liquibase.command - Command execution complete
17:00:17.793 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:00:17.865 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:00:17.938 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:00:17.938 [main] INFO  liquibase.command - Using deploymentId: 9128817938
17:00:17.939 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:00:18.053 [main] INFO  liquibase.changelog - Table orders created
17:00:18.054 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 101ms
17:00:18.072 [main] INFO  liquibase.changelog - Table order_items created
17:00:18.072 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 14ms
17:00:18.076 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:00:18.076 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:00:18.082 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:00:18.084 [main] INFO  liquibase.changelog - Foreign key constraint added to order_items (id)
17:00:18.084 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:00:18.088 [main] INFO  liquibase.util - UPDATE SUMMARY
17:00:18.088 [main] INFO  liquibase.util - Run:                          4
17:00:18.088 [main] INFO  liquibase.util - Previously run:               0
17:00:18.088 [main] INFO  liquibase.util - Filtered out:                 0
17:00:18.088 [main] INFO  liquibase.util - -------------------------------
17:00:18.088 [main] INFO  liquibase.util - Total change sets:            4
17:00:18.088 [main] INFO  liquibase.util - Update summary generated
17:00:18.089 [main] INFO  liquibase.command - Update command completed successfully.
17:00:18.091 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:00:18.091 [main] INFO  liquibase.command - Command execution complete
17:00:18.137 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:00:18.176 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:00:18.201 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:00:18.375 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:00:19.054 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:00:19.056 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:00:19.245 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:00:19.532 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:00:19.539 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.821 seconds (process running for 4.305)
17:00:41.066 [http-nio-8081-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:00:41.066 [http-nio-8081-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:00:41.068 [http-nio-8081-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
17:00:41.144 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:00:41.172 [http-nio-8081-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
17:00:41.173 [http-nio-8081-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: значение NULL в столбце "id" отношения "order_items" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (null, название товара, 2).
17:00:41.182 [http-nio-8081-exec-4] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: значение NULL в столбце "id" отношения "order_items" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (null, название товара, 2).] [insert into order_items (item_name,quantity) values (?,?)]; SQL [insert into order_items (item_name,quantity) values (?,?)]; constraint [null]
17:01:14.785 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:01:14.787 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:01:14.790 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:01:16.656 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 127520 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:01:16.658 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:01:16.659 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:01:17.075 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:01:17.116 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
17:01:17.482 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:01:17.489 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:01:17.489 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:01:17.530 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:01:17.530 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
17:01:17.620 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:01:17.753 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@437ed416
17:01:17.755 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:01:17.858 [main] INFO  liquibase.database - Set default schema name to public
17:01:17.947 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:01:17.952 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:01:18.140 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:01:18.147 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:01:18.149 [main] INFO  liquibase.command - Command execution complete
17:01:18.345 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:01:18.379 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:01:18.443 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:01:18.444 [main] INFO  liquibase.command - Using deploymentId: 9128878444
17:01:18.445 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:01:18.511 [main] INFO  liquibase.changelog - Table orders created
17:01:18.512 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 53ms
17:01:18.544 [main] INFO  liquibase.changelog - Table order_items created
17:01:18.544 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 27ms
17:01:18.548 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:01:18.548 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:01:18.554 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:01:18.556 [main] INFO  liquibase.changelog - Foreign key constraint added to order_items (id)
17:01:18.557 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 6ms
17:01:18.561 [main] INFO  liquibase.util - UPDATE SUMMARY
17:01:18.561 [main] INFO  liquibase.util - Run:                          4
17:01:18.561 [main] INFO  liquibase.util - Previously run:               0
17:01:18.561 [main] INFO  liquibase.util - Filtered out:                 0
17:01:18.561 [main] INFO  liquibase.util - -------------------------------
17:01:18.561 [main] INFO  liquibase.util - Total change sets:            4
17:01:18.561 [main] INFO  liquibase.util - Update summary generated
17:01:18.563 [main] INFO  liquibase.command - Update command completed successfully.
17:01:18.564 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:01:18.565 [main] INFO  liquibase.command - Command execution complete
17:01:18.618 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:01:18.660 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:01:18.684 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:01:18.863 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:01:19.562 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:01:19.564 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:01:19.759 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:01:20.088 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:01:20.096 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.798 seconds (process running for 4.294)
17:01:22.045 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:01:22.045 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:01:22.046 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:01:22.123 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:01:22.153 [http-nio-8081-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
17:01:22.153 [http-nio-8081-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(1) отсутствует в таблице "orders".
17:01:22.161 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(1) отсутствует в таблице "orders".] [insert into order_items (item_name,quantity) values (?,?)]; SQL [insert into order_items (item_name,quantity) values (?,?)]; constraint [null]
17:01:39.798 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=1, itemsId=null, paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:01:39.811 [http-nio-8081-exec-4] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:01:44.981 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:01:44.982 [http-nio-8081-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
17:01:44.983 [http-nio-8081-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(2) отсутствует в таблице "orders".
17:01:44.984 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(2) отсутствует в таблице "orders".] [insert into order_items (item_name,quantity) values (?,?)]; SQL [insert into order_items (item_name,quantity) values (?,?)]; constraint [null]
17:02:04.283 [http-nio-8081-exec-7] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=1, itemsId=null, paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:02:04.285 [http-nio-8081-exec-7] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 2
17:02:07.266 [http-nio-8081-exec-10] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:02:07.267 [http-nio-8081-exec-10] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
17:02:07.268 [http-nio-8081-exec-10] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(3) отсутствует в таблице "orders".
17:02:07.268 [http-nio-8081-exec-10] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(3) отсутствует в таблице "orders".] [insert into order_items (item_name,quantity) values (?,?)]; SQL [insert into order_items (item_name,quantity) values (?,?)]; constraint [null]
17:02:33.120 [http-nio-8081-exec-9] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=null, paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:02:33.122 [http-nio-8081-exec-9] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 3
17:02:39.810 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:02:39.812 [http-nio-8081-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
17:02:39.812 [http-nio-8081-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(4) отсутствует в таблице "orders".
17:02:39.813 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: INSERT или UPDATE в таблице "order_items" нарушает ограничение внешнего ключа "order_items_fk"
  Подробности: Ключ (id)=(4) отсутствует в таблице "orders".] [insert into order_items (item_name,quantity) values (?,?)]; SQL [insert into order_items (item_name,quantity) values (?,?)]; constraint [null]
17:04:42.595 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:04:42.598 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:04:42.602 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:04:44.510 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 125960 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:04:44.512 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:04:44.513 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:04:44.928 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:04:44.972 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 2 JPA repository interfaces.
17:04:45.344 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:04:45.353 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:04:45.354 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:04:45.397 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:04:45.397 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 850 ms
17:04:45.482 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:04:45.622 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@16d431b4
17:04:45.624 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:04:45.731 [main] INFO  liquibase.database - Set default schema name to public
17:04:45.817 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:04:45.823 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:04:46.018 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:04:46.025 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:04:46.027 [main] INFO  liquibase.command - Command execution complete
17:04:46.214 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:04:46.260 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:04:46.354 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:04:46.355 [main] INFO  liquibase.command - Using deploymentId: 9129086355
17:04:46.356 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:04:46.438 [main] INFO  liquibase.changelog - Table orders created
17:04:46.439 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 69ms
17:04:46.462 [main] INFO  liquibase.changelog - Table order_items created
17:04:46.463 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 17ms
17:04:46.467 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:04:46.467 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:04:46.473 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:04:46.476 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:04:46.476 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:04:46.480 [main] INFO  liquibase.util - UPDATE SUMMARY
17:04:46.480 [main] INFO  liquibase.util - Run:                          4
17:04:46.480 [main] INFO  liquibase.util - Previously run:               0
17:04:46.480 [main] INFO  liquibase.util - Filtered out:                 0
17:04:46.480 [main] INFO  liquibase.util - -------------------------------
17:04:46.480 [main] INFO  liquibase.util - Total change sets:            4
17:04:46.480 [main] INFO  liquibase.util - Update summary generated
17:04:46.482 [main] INFO  liquibase.command - Update command completed successfully.
17:04:46.483 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:04:46.484 [main] INFO  liquibase.command - Command execution complete
17:04:46.534 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:04:46.576 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:04:46.603 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:04:46.784 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:04:47.471 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:04:47.473 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:04:47.669 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:04:47.981 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:04:47.988 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.809 seconds (process running for 4.282)
17:04:54.846 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:04:54.846 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:04:54.847 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:04:54.925 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:04:54.965 [http-nio-8081-exec-1] INFO  c.c.o.s.impl.OrderItemServiceImpl - Created new order with id: 1
17:05:10.387 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=null, paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:05:10.393 [http-nio-8081-exec-4] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:05:25.150 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1, 2], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:05:25.162 [http-nio-8081-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:05:25.162 [http-nio-8081-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "order_id" в таблице "order_items" не существует
  Позиция: 26
17:05:25.170 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "order_id" в таблице "order_items" не существует
  Позиция: 26] [insert into order_items (order_id,item_id) values (?,?)]; SQL [insert into order_items (order_id,item_id) values (?,?)]
17:05:34.404 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:06:23.006 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:06:23.010 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:06:23.012 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:06:26.029 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 122200 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:06:26.030 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:06:26.031 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:06:26.437 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:06:26.477 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
17:06:26.847 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:06:26.855 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:06:26.856 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:06:26.896 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:06:26.897 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 834 ms
17:06:26.985 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:06:27.116 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8b13d91
17:06:27.117 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:06:27.220 [main] INFO  liquibase.database - Set default schema name to public
17:06:27.312 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:06:27.317 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:06:27.431 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:06:27.510 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:06:27.515 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:06:27.517 [main] INFO  liquibase.command - Command execution complete
17:06:27.720 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:06:27.744 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:06:27.827 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:06:27.827 [main] INFO  liquibase.command - Using deploymentId: 9129187827
17:06:27.828 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:06:27.911 [main] INFO  liquibase.changelog - Table orders created
17:06:27.913 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 67ms
17:06:27.934 [main] INFO  liquibase.changelog - Table order_items created
17:06:27.935 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 17ms
17:06:27.938 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:06:27.939 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:06:27.944 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:06:27.946 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:06:27.947 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:06:27.951 [main] INFO  liquibase.util - UPDATE SUMMARY
17:06:27.951 [main] INFO  liquibase.util - Run:                          4
17:06:27.951 [main] INFO  liquibase.util - Previously run:               0
17:06:27.951 [main] INFO  liquibase.util - Filtered out:                 0
17:06:27.951 [main] INFO  liquibase.util - -------------------------------
17:06:27.951 [main] INFO  liquibase.util - Total change sets:            4
17:06:27.951 [main] INFO  liquibase.util - Update summary generated
17:06:27.952 [main] INFO  liquibase.command - Update command completed successfully.
17:06:27.954 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:06:27.955 [main] INFO  liquibase.command - Command execution complete
17:06:28.007 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:06:28.048 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:06:28.074 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:06:28.248 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:06:28.945 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:06:28.947 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:06:29.136 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:06:29.428 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:06:29.435 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.751 seconds (process running for 4.253)
17:06:31.483 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:06:31.483 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:06:31.484 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:06:31.559 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:06:40.485 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:06:40.525 [http-nio-8081-exec-4] INFO  c.c.o.s.impl.OrderItemServiceImpl - Created new order with id: 1
17:07:26.569 [http-nio-8081-exec-10] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:07:26.584 [http-nio-8081-exec-10] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:07:48.589 [http-nio-8081-exec-6] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:07:48.593 [http-nio-8081-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:07:48.594 [http-nio-8081-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:07:48.601 [http-nio-8081-exec-6] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:14:16.737 [http-nio-8081-exec-8] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:14:16.740 [http-nio-8081-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:14:16.740 [http-nio-8081-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:14:16.740 [http-nio-8081-exec-8] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:15:31.399 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:15:31.401 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:15:31.404 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:15:33.384 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129824 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:15:33.386 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:15:33.386 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:15:33.788 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:15:33.832 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 2 JPA repository interfaces.
17:15:34.190 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:15:34.198 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:15:34.198 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:15:34.239 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:15:34.240 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 825 ms
17:15:34.325 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:15:34.456 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
17:15:34.457 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:15:34.559 [main] INFO  liquibase.database - Set default schema name to public
17:15:34.649 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:15:34.655 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:15:34.773 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:15:34.850 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:15:34.858 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:15:34.859 [main] INFO  liquibase.command - Command execution complete
17:15:35.059 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:15:35.097 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:15:35.200 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:15:35.201 [main] INFO  liquibase.command - Using deploymentId: 9129735201
17:15:35.202 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:15:35.300 [main] INFO  liquibase.changelog - Table orders created
17:15:35.301 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 85ms
17:15:35.340 [main] INFO  liquibase.changelog - Table order_items created
17:15:35.341 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 35ms
17:15:35.345 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:15:35.345 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:15:35.352 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:15:35.353 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.items_id
17:15:35.355 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:15:35.355 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 6ms
17:15:35.359 [main] INFO  liquibase.util - UPDATE SUMMARY
17:15:35.359 [main] INFO  liquibase.util - Run:                          4
17:15:35.359 [main] INFO  liquibase.util - Previously run:               0
17:15:35.359 [main] INFO  liquibase.util - Filtered out:                 0
17:15:35.359 [main] INFO  liquibase.util - -------------------------------
17:15:35.359 [main] INFO  liquibase.util - Total change sets:            4
17:15:35.359 [main] INFO  liquibase.util - Update summary generated
17:15:35.360 [main] INFO  liquibase.command - Update command completed successfully.
17:15:35.362 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:15:35.362 [main] INFO  liquibase.command - Command execution complete
17:15:35.408 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:15:35.447 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:15:35.474 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:15:35.648 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:15:36.330 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:15:36.332 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:15:36.519 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:15:36.817 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:15:36.823 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.767 seconds (process running for 4.25)
17:15:44.665 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:15:44.665 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:15:44.666 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:15:44.753 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:15:44.788 [http-nio-8081-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
17:15:44.788 [http-nio-8081-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (1, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:15:44.777018, null).
17:15:44.797 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (1, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:15:44.777018, null).] [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; SQL [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; constraint [null]
17:15:49.004 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:15:49.006 [http-nio-8081-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
17:15:49.006 [http-nio-8081-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (2, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:15:49.00533, null).
17:15:49.007 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (2, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:15:49.00533, null).] [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; SQL [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; constraint [null]
17:16:10.543 [http-nio-8081-exec-6] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[0], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:16:10.546 [http-nio-8081-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
17:16:10.546 [http-nio-8081-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (3, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:16:10.544128, null).
17:16:10.547 [http-nio-8081-exec-6] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: значение NULL в столбце "items_id" отношения "orders" нарушает ограничение NOT NULL
  Подробности: Ошибочная строка содержит (3, 3, PENDING, NOT_SHIPPED, 2024-02-28 17:16:10.544128, null).] [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; SQL [insert into orders (payment_status,registration_date,shipment_status,user_id) values (?,?,?,?)]; constraint [null]
17:16:18.124 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:21:46.655 [http-nio-8081-exec-10] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:22:06.657 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:22:06.660 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:22:06.666 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:22:08.693 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129268 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:22:08.695 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:22:08.695 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:22:09.101 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:22:09.143 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
17:22:09.498 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:22:09.505 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:22:09.506 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:22:09.547 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:22:09.547 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
17:22:09.632 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:22:09.759 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
17:22:09.761 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:22:09.861 [main] INFO  liquibase.database - Set default schema name to public
17:22:09.949 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:22:09.954 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:22:10.071 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:22:10.150 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:22:10.157 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:22:10.159 [main] INFO  liquibase.command - Command execution complete
17:22:10.353 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:22:10.405 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:22:10.514 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:22:10.514 [main] INFO  liquibase.command - Using deploymentId: 9130130514
17:22:10.515 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:22:10.598 [main] INFO  liquibase.changelog - Table orders created
17:22:10.599 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 70ms
17:22:10.637 [main] INFO  liquibase.changelog - Table order_items created
17:22:10.638 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 33ms
17:22:10.642 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:22:10.642 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:22:10.648 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:22:10.650 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:22:10.650 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:22:10.655 [main] INFO  liquibase.util - UPDATE SUMMARY
17:22:10.655 [main] INFO  liquibase.util - Run:                          4
17:22:10.655 [main] INFO  liquibase.util - Previously run:               0
17:22:10.655 [main] INFO  liquibase.util - Filtered out:                 0
17:22:10.655 [main] INFO  liquibase.util - -------------------------------
17:22:10.655 [main] INFO  liquibase.util - Total change sets:            4
17:22:10.655 [main] INFO  liquibase.util - Update summary generated
17:22:10.656 [main] INFO  liquibase.command - Update command completed successfully.
17:22:10.658 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:22:10.658 [main] INFO  liquibase.command - Command execution complete
17:22:10.705 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:22:10.744 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:22:10.768 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:22:10.940 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:22:11.619 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:22:11.621 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:22:11.808 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:22:12.104 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:22:12.111 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.749 seconds (process running for 4.235)
17:22:15.603 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:22:15.603 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:22:15.604 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:22:15.680 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:22:25.635 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:22:25.690 [http-nio-8081-exec-3] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:22:35.280 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:22:35.284 [http-nio-8081-exec-5] INFO  c.c.o.s.impl.OrderItemServiceImpl - Created new order with id: 1
17:23:22.882 [http-nio-8081-exec-6] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1, 2, 3, 4], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:23:22.886 [http-nio-8081-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:23:22.886 [http-nio-8081-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:23:22.894 [http-nio-8081-exec-6] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:23:35.139 [http-nio-8081-exec-8] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:23:35.141 [http-nio-8081-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:23:35.141 [http-nio-8081-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:23:35.141 [http-nio-8081-exec-8] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:23:42.347 [http-nio-8081-exec-10] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:27:24.714 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:27:24.716 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:27:24.722 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:27:27.929 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 128196 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:27:27.930 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:27:27.930 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:27:28.335 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:27:28.379 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 2 JPA repository interfaces.
17:27:28.741 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:27:28.749 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:27:28.749 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:27:28.789 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:27:28.790 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 829 ms
17:27:28.876 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:27:29.008 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1788cb61
17:27:29.010 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:27:29.114 [main] INFO  liquibase.database - Set default schema name to public
17:27:29.201 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:27:29.207 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:27:29.323 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:27:29.402 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:27:29.409 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:27:29.411 [main] INFO  liquibase.command - Command execution complete
17:27:29.619 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:27:29.664 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:27:29.744 [main] INFO  liquibase.changelog - Change failed validation!
17:27:29.746 [main] INFO  liquibase.command - Command execution complete
17:27:29.747 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets had duplicate identifiers
          db/changelog/db.changelog-master.xml::addItemsIdColumn::admin

17:27:29.747 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:27:29.749 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:27:29.752 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
17:27:29.759 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
17:27:29.771 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets had duplicate identifiers
          db/changelog/db.changelog-master.xml::addItemsIdColumn::admin

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets had duplicate identifiers
          db/changelog/db.changelog-master.xml::addItemsIdColumn::admin

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets had duplicate identifiers
          db/changelog/db.changelog-master.xml::addItemsIdColumn::admin

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
17:27:58.268 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 127356 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:27:58.269 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:27:58.269 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:27:58.687 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:27:58.730 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
17:27:59.088 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:27:59.096 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:27:59.097 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:27:59.139 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:27:59.139 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
17:27:59.225 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:27:59.361 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
17:27:59.362 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:27:59.467 [main] INFO  liquibase.database - Set default schema name to public
17:27:59.554 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:27:59.559 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:27:59.738 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:27:59.746 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:27:59.747 [main] INFO  liquibase.command - Command execution complete
17:27:59.945 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:27:59.986 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:28:00.118 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:28:00.119 [main] INFO  liquibase.command - Using deploymentId: 9130480119
17:28:00.121 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:28:00.245 [main] INFO  liquibase.changelog - Table orders created
17:28:00.247 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 111ms
17:28:00.270 [main] INFO  liquibase.changelog - Table order_items created
17:28:00.271 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 19ms
17:28:00.274 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:28:00.274 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:28:00.280 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:28:00.282 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:28:00.283 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 6ms
17:28:00.286 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to order_items
17:28:00.286 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addOrderItemsIdColumn::admin ran successfully in 1ms
17:28:00.289 [main] INFO  liquibase.util - UPDATE SUMMARY
17:28:00.290 [main] INFO  liquibase.util - Run:                          5
17:28:00.290 [main] INFO  liquibase.util - Previously run:               0
17:28:00.290 [main] INFO  liquibase.util - Filtered out:                 0
17:28:00.290 [main] INFO  liquibase.util - -------------------------------
17:28:00.290 [main] INFO  liquibase.util - Total change sets:            5
17:28:00.290 [main] INFO  liquibase.util - Update summary generated
17:28:00.291 [main] INFO  liquibase.command - Update command completed successfully.
17:28:00.293 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:28:00.293 [main] INFO  liquibase.command - Command execution complete
17:28:00.340 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:28:00.382 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:28:00.407 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:28:00.581 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:28:01.261 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:28:01.263 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:28:01.465 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:28:01.765 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:28:01.772 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.838 seconds (process running for 4.37)
17:28:06.095 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:28:06.095 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:28:06.096 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:28:06.170 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Integer value (token `JsonToken.VALUE_NUMBER_INT`)
17:28:20.419 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:28:20.469 [http-nio-8081-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:28:20.469 [http-nio-8081-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:28:20.475 [http-nio-8081-exec-4] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:28:44.587 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:28:44.589 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:28:44.596 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:28:46.729 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129492 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:28:46.730 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:28:46.731 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:28:47.133 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:28:47.174 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
17:28:47.532 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:28:47.541 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:28:47.541 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:28:47.584 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:28:47.584 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 823 ms
17:28:47.670 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:28:47.805 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3815146b
17:28:47.807 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:28:47.910 [main] INFO  liquibase.database - Set default schema name to public
17:28:47.996 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:28:48.001 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:28:48.115 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:28:48.192 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:28:48.199 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:28:48.201 [main] INFO  liquibase.command - Command execution complete
17:28:48.404 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:28:48.454 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:28:48.595 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:28:48.596 [main] INFO  liquibase.command - Using deploymentId: 9130528595
17:28:48.597 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:28:48.817 [main] INFO  liquibase.changelog - Table orders created
17:28:48.818 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 205ms
17:28:48.880 [main] INFO  liquibase.changelog - Table order_items created
17:28:48.880 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 56ms
17:28:48.884 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:28:48.884 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:28:48.890 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:28:48.892 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:28:48.893 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:28:48.896 [main] INFO  liquibase.changelog - Columns item_id(BIGINT) added to order_items
17:28:48.896 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addOrderItemsIdColumn::admin ran successfully in 1ms
17:28:48.900 [main] INFO  liquibase.util - UPDATE SUMMARY
17:28:48.900 [main] INFO  liquibase.util - Run:                          5
17:28:48.900 [main] INFO  liquibase.util - Previously run:               0
17:28:48.900 [main] INFO  liquibase.util - Filtered out:                 0
17:28:48.900 [main] INFO  liquibase.util - -------------------------------
17:28:48.900 [main] INFO  liquibase.util - Total change sets:            5
17:28:48.900 [main] INFO  liquibase.util - Update summary generated
17:28:48.901 [main] INFO  liquibase.command - Update command completed successfully.
17:28:48.903 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:28:48.903 [main] INFO  liquibase.command - Command execution complete
17:28:48.952 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:28:48.995 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:28:49.022 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:28:49.194 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:28:49.891 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:28:49.893 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:28:50.079 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:28:50.380 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:28:50.387 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.993 seconds (process running for 4.518)
17:28:52.624 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:28:52.624 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:28:52.625 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:28:52.710 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:28:52.762 [http-nio-8081-exec-1] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:29:00.513 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:29:00.517 [http-nio-8081-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23505
17:29:00.517 [http-nio-8081-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "order_items_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.
17:29:00.527 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "order_items_pkey"
  Подробности: Ключ "(id)=(1)" уже существует.] [insert into order_items (item_id,item_name,quantity) values (?,?,?)]; SQL [insert into order_items (item_id,item_name,quantity) values (?,?,?)]; constraint [null]
17:30:12.910 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:30:12.912 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:30:12.914 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:30:15.074 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 128508 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:30:15.075 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:30:15.076 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:30:15.484 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:30:15.525 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
17:30:15.889 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:30:15.897 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:30:15.897 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:30:15.938 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:30:15.938 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 829 ms
17:30:16.022 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:30:16.149 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8b13d91
17:30:16.150 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:30:16.252 [main] INFO  liquibase.database - Set default schema name to public
17:30:16.342 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:30:16.347 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:30:16.468 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:30:16.544 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:30:16.550 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:30:16.551 [main] INFO  liquibase.command - Command execution complete
17:30:16.743 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:30:16.770 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:30:16.866 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:30:16.867 [main] INFO  liquibase.command - Using deploymentId: 9130616867
17:30:16.868 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:30:17.016 [main] INFO  liquibase.changelog - Table orders created
17:30:17.018 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 135ms
17:30:17.081 [main] INFO  liquibase.changelog - Table order_items created
17:30:17.082 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 59ms
17:30:17.085 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:30:17.086 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:30:17.091 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:30:17.094 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:30:17.094 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 4ms
17:30:17.097 [main] INFO  liquibase.util - UPDATE SUMMARY
17:30:17.098 [main] INFO  liquibase.util - Run:                          4
17:30:17.098 [main] INFO  liquibase.util - Previously run:               0
17:30:17.098 [main] INFO  liquibase.util - Filtered out:                 0
17:30:17.098 [main] INFO  liquibase.util - -------------------------------
17:30:17.098 [main] INFO  liquibase.util - Total change sets:            4
17:30:17.098 [main] INFO  liquibase.util - Update summary generated
17:30:17.099 [main] INFO  liquibase.command - Update command completed successfully.
17:30:17.101 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:30:17.102 [main] INFO  liquibase.command - Command execution complete
17:30:17.149 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:30:17.190 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:30:17.215 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:30:17.392 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:30:18.071 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:30:18.073 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:30:18.260 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:30:18.556 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:30:18.563 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.825 seconds (process running for 4.316)
17:30:22.974 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:30:22.975 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:30:22.975 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
17:30:23.058 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:30:23.107 [http-nio-8081-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:30:23.108 [http-nio-8081-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:30:23.115 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:30:26.210 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:30:26.213 [http-nio-8081-exec-4] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 2
17:31:30.803 [http-nio-8081-exec-7] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:31:30.805 [http-nio-8081-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:31:30.806 [http-nio-8081-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29
17:31:30.806 [http-nio-8081-exec-7] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,item_id) values (?,?)]; SQL [insert into order_items (id,item_id) values (?,?)]
17:35:43.910 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:35:43.912 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:35:43.914 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:35:47.222 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 127148 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:35:47.223 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:35:47.224 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:35:47.624 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:35:47.668 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
17:35:48.035 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:35:48.044 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:35:48.044 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:35:48.087 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:35:48.087 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 836 ms
17:35:48.177 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:35:48.300 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@34c7232c
17:35:48.301 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:35:48.404 [main] INFO  liquibase.database - Set default schema name to public
17:35:48.488 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:35:48.492 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:35:48.604 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:35:48.690 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:35:48.697 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:35:48.698 [main] INFO  liquibase.command - Command execution complete
17:35:48.892 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:35:48.952 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:35:49.034 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:35:49.035 [main] INFO  liquibase.command - Using deploymentId: 9130949035
17:35:49.036 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:35:49.123 [main] INFO  liquibase.changelog - Table orders created
17:35:49.124 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 74ms
17:35:49.163 [main] INFO  liquibase.changelog - Table order_items created
17:35:49.163 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 33ms
17:35:49.167 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:35:49.168 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:35:49.174 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:35:49.176 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:35:49.177 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 6ms
17:35:49.180 [main] INFO  liquibase.util - UPDATE SUMMARY
17:35:49.181 [main] INFO  liquibase.util - Run:                          4
17:35:49.181 [main] INFO  liquibase.util - Previously run:               0
17:35:49.181 [main] INFO  liquibase.util - Filtered out:                 0
17:35:49.181 [main] INFO  liquibase.util - -------------------------------
17:35:49.181 [main] INFO  liquibase.util - Total change sets:            4
17:35:49.181 [main] INFO  liquibase.util - Update summary generated
17:35:49.182 [main] INFO  liquibase.command - Update command completed successfully.
17:35:49.184 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:35:49.184 [main] INFO  liquibase.command - Command execution complete
17:35:49.232 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:35:49.270 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:35:49.295 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:35:49.466 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:35:50.151 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:35:50.153 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:35:50.338 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:35:50.632 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:35:50.638 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.735 seconds (process running for 4.231)
17:36:57.192 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:36:57.193 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:36:57.194 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:36:57.273 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:36:57.325 [http-nio-8081-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:36:57.326 [http-nio-8081-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "items_id" в таблице "order_items" не существует
  Позиция: 29
17:36:57.333 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "items_id" в таблице "order_items" не существует
  Позиция: 29] [insert into order_items (id,items_id) values (?,?)]; SQL [insert into order_items (id,items_id) values (?,?)]
17:37:19.228 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:37:19.230 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:37:19.232 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:37:22.486 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 126632 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:37:22.488 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:37:22.489 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:37:22.895 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:37:22.936 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
17:37:23.288 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:37:23.296 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:37:23.297 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:37:23.338 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:37:23.339 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
17:37:23.424 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:37:23.551 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
17:37:23.553 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:37:23.655 [main] INFO  liquibase.database - Set default schema name to public
17:37:23.744 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:37:23.749 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:37:23.874 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:37:23.949 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:37:23.956 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:37:23.958 [main] INFO  liquibase.command - Command execution complete
17:37:24.160 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:37:24.196 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:37:24.262 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:37:24.262 [main] INFO  liquibase.command - Using deploymentId: 9131044262
17:37:24.263 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:37:24.350 [main] INFO  liquibase.changelog - Table orders created
17:37:24.351 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 74ms
17:37:24.371 [main] INFO  liquibase.changelog - Table order_items created
17:37:24.372 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 16ms
17:37:24.375 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:37:24.376 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 2ms
17:37:24.381 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:37:24.384 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:37:24.384 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:37:24.388 [main] INFO  liquibase.util - UPDATE SUMMARY
17:37:24.389 [main] INFO  liquibase.util - Run:                          4
17:37:24.389 [main] INFO  liquibase.util - Previously run:               0
17:37:24.389 [main] INFO  liquibase.util - Filtered out:                 0
17:37:24.389 [main] INFO  liquibase.util - -------------------------------
17:37:24.389 [main] INFO  liquibase.util - Total change sets:            4
17:37:24.389 [main] INFO  liquibase.util - Update summary generated
17:37:24.390 [main] INFO  liquibase.command - Update command completed successfully.
17:37:24.392 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:37:24.392 [main] INFO  liquibase.command - Command execution complete
17:37:24.446 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:37:24.487 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:37:24.515 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:37:24.690 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:37:25.367 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:37:25.370 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:37:25.566 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:37:25.860 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:37:25.867 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.698 seconds (process running for 4.188)
17:37:27.858 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:37:27.858 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:37:27.859 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
17:37:27.941 [http-nio-8081-exec-2] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:37:27.991 [http-nio-8081-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:37:27.992 [http-nio-8081-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26
17:37:28.000 [http-nio-8081-exec-2] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26] [insert into order_items (item_id,items_id) values (?,?)]; SQL [insert into order_items (item_id,items_id) values (?,?)]
17:37:32.025 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:37:32.029 [http-nio-8081-exec-4] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 2
17:37:37.340 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[1], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:37:37.343 [http-nio-8081-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:37:37.343 [http-nio-8081-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26
17:37:37.344 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26] [insert into order_items (item_id,items_id) values (?,?)]; SQL [insert into order_items (item_id,items_id) values (?,?)]
17:39:23.276 [http-nio-8081-exec-7] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.util.ArrayList<java.math.BigInteger>` from Object value (token `JsonToken.START_OBJECT`)
17:40:00.344 [http-nio-8081-exec-9] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:40:20.625 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:42:04.593 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:48:40.591 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:51:51.453 [http-nio-8081-exec-7] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:53:49.197 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:53:49.201 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:53:49.205 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:53:53.300 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 123784 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:53:53.302 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:53:53.302 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:53:53.717 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:53:53.759 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
17:53:54.116 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:53:54.124 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:53:54.124 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:53:54.165 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:53:54.166 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 832 ms
17:53:54.250 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:53:54.376 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6de7778f
17:53:54.377 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:53:54.476 [main] INFO  liquibase.database - Set default schema name to public
17:53:54.564 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:53:54.569 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:53:54.687 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:53:54.762 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:53:54.769 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:53:54.770 [main] INFO  liquibase.command - Command execution complete
17:53:54.975 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:53:55.028 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:53:55.108 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:53:55.109 [main] INFO  liquibase.command - Using deploymentId: 9132035109
17:53:55.110 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:53:55.199 [main] INFO  liquibase.changelog - Table orders created
17:53:55.201 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 74ms
17:53:55.239 [main] INFO  liquibase.changelog - Table order_items created
17:53:55.240 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 34ms
17:53:55.244 [main] INFO  liquibase.changelog - Columns items_id(VARCHAR(255)) added to orders
17:53:55.244 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:53:55.250 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:53:55.252 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin encountered an exception.
17:53:55.254 [main] INFO  liquibase.command - Update command encountered an exception.
17:53:55.255 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:53:55.256 [main] INFO  liquibase.command - Command execution complete
17:53:55.257 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
17:53:55.258 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:53:55.260 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:53:55.263 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
17:53:55.271 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
17:53:55.284 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 44 common frames omitted
Caused by: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 65 common frames omitted
17:54:44.536 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 123936 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:54:44.538 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:54:44.538 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:54:44.956 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:54:45.000 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
17:54:45.368 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:54:45.377 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:54:45.377 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:54:45.419 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:54:45.419 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 850 ms
17:54:45.509 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:54:45.640 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dfd6220
17:54:45.641 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:54:45.744 [main] INFO  liquibase.database - Set default schema name to public
17:54:45.841 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:54:45.847 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:54:46.034 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:54:46.041 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:54:46.043 [main] INFO  liquibase.command - Command execution complete
17:54:46.231 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:54:46.267 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:54:46.342 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:54:46.343 [main] INFO  liquibase.command - Using deploymentId: 9132086343
17:54:46.344 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:54:46.375 [main] INFO  liquibase.changelog - Table orders created
17:54:46.376 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 19ms
17:54:46.415 [main] INFO  liquibase.changelog - Table order_items created
17:54:46.415 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 35ms
17:54:46.419 [main] INFO  liquibase.changelog - Columns items_id(VARCHAR(255)) added to orders
17:54:46.419 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:54:46.425 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:54:46.426 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin encountered an exception.
17:54:46.428 [main] INFO  liquibase.command - Update command encountered an exception.
17:54:46.430 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:54:46.430 [main] INFO  liquibase.command - Command execution complete
17:54:46.431 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
17:54:46.432 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:54:46.434 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:54:46.436 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
17:54:46.444 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
17:54:46.457 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 30 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-master.xml::addForeignKeys::admin:
     Reason: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 44 common frames omitted
Caused by: liquibase.exception.DatabaseException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint. [Failed SQL: (0) ALTER TABLE public.orders ADD CONSTRAINT order_items_fk FOREIGN KEY (items_id) REFERENCES public.order_items (id)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ограничение внешнего ключа "order_items_fk" нельзя реализовать
  Подробности: Столбцы ключа "items_id" и "id" имеют несовместимые типы: character varying и bigint.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 65 common frames omitted
17:54:57.830 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129336 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:54:57.831 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:54:57.832 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:54:58.236 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:54:58.278 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
17:54:58.634 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:54:58.643 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:54:58.643 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:54:58.685 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:54:58.686 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
17:54:58.769 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:54:59.003 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6a567f7b
17:54:59.004 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:54:59.109 [main] INFO  liquibase.database - Set default schema name to public
17:54:59.196 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:54:59.201 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:54:59.394 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:54:59.401 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:54:59.402 [main] INFO  liquibase.command - Command execution complete
17:54:59.593 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:54:59.652 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:54:59.743 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:54:59.743 [main] INFO  liquibase.command - Using deploymentId: 9132099743
17:54:59.744 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:54:59.846 [main] INFO  liquibase.changelog - Table orders created
17:54:59.847 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 88ms
17:54:59.886 [main] INFO  liquibase.changelog - Table order_items created
17:54:59.887 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 36ms
17:54:59.891 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:54:59.891 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:54:59.897 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:54:59.899 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:54:59.900 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:54:59.904 [main] INFO  liquibase.util - UPDATE SUMMARY
17:54:59.904 [main] INFO  liquibase.util - Run:                          4
17:54:59.904 [main] INFO  liquibase.util - Previously run:               0
17:54:59.904 [main] INFO  liquibase.util - Filtered out:                 0
17:54:59.904 [main] INFO  liquibase.util - -------------------------------
17:54:59.904 [main] INFO  liquibase.util - Total change sets:            4
17:54:59.904 [main] INFO  liquibase.util - Update summary generated
17:54:59.906 [main] INFO  liquibase.command - Update command completed successfully.
17:54:59.908 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:54:59.908 [main] INFO  liquibase.command - Command execution complete
17:54:59.959 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:54:59.998 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:55:00.026 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:55:00.207 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:55:00.464 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'item_id' is duplicated in mapping for collection 'null' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
17:55:00.465 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'item_id' is duplicated in mapping for collection 'null' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
17:55:00.465 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:55:00.467 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:55:00.470 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
17:55:00.478 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
17:55:00.489 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'item_id' is duplicated in mapping for collection 'null' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.company.ordermanagementservice.OrderManagementServiceApplication.main(OrderManagementServiceApplication.java:10)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'item_id' is duplicated in mapping for collection 'null' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 16 common frames omitted
Caused by: org.hibernate.MappingException: Column 'item_id' is duplicated in mapping for collection 'null' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.hibernate.mapping.Value.checkColumnDuplication(Value.java:197)
	at org.hibernate.mapping.Collection.checkColumnDuplication(Collection.java:408)
	at org.hibernate.mapping.Collection.validate(Collection.java:394)
	at org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:501)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:273)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 20 common frames omitted
17:55:55.002 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129392 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:55:55.003 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:55:55.004 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:55:55.418 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:55:55.460 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
17:55:55.823 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:55:55.831 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:55:55.831 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:55:55.872 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:55:55.872 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 837 ms
17:55:55.958 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:55:56.096 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61394494
17:55:56.097 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:55:56.200 [main] INFO  liquibase.database - Set default schema name to public
17:55:56.296 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:55:56.301 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:55:56.417 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:55:56.504 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:55:56.511 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:55:56.513 [main] INFO  liquibase.command - Command execution complete
17:55:56.705 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:55:56.725 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:55:56.809 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:55:56.810 [main] INFO  liquibase.command - Using deploymentId: 9132156809
17:55:56.811 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:55:56.899 [main] INFO  liquibase.changelog - Table orders created
17:55:56.901 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 76ms
17:55:56.917 [main] INFO  liquibase.changelog - Table order_items created
17:55:56.918 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 13ms
17:55:56.922 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:55:56.922 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:55:56.928 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:55:56.931 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:55:56.932 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:55:56.937 [main] INFO  liquibase.util - UPDATE SUMMARY
17:55:56.937 [main] INFO  liquibase.util - Run:                          4
17:55:56.937 [main] INFO  liquibase.util - Previously run:               0
17:55:56.937 [main] INFO  liquibase.util - Filtered out:                 0
17:55:56.937 [main] INFO  liquibase.util - -------------------------------
17:55:56.937 [main] INFO  liquibase.util - Total change sets:            4
17:55:56.937 [main] INFO  liquibase.util - Update summary generated
17:55:56.939 [main] INFO  liquibase.command - Update command completed successfully.
17:55:56.941 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:55:56.941 [main] INFO  liquibase.command - Command execution complete
17:55:56.995 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:55:57.037 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:55:57.063 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:55:57.246 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:55:57.942 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:55:57.944 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:55:58.135 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:55:58.430 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:55:58.437 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.754 seconds (process running for 4.235)
17:56:05.232 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:56:05.233 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:56:05.233 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
17:56:05.311 [http-nio-8081-exec-1] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from Object value (token `JsonToken.START_OBJECT`)
17:57:06.293 [http-nio-8081-exec-8] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:57:06.346 [http-nio-8081-exec-8] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:57:13.085 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:57:13.089 [http-nio-8081-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:57:13.089 [http-nio-8081-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26
17:57:13.100 [http-nio-8081-exec-5] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: could not execute statement [ОШИБКА: столбец "item_id" в таблице "order_items" не существует
  Позиция: 26] [insert into order_items (item_id,item_name,quantity) values (?,?,?)]; SQL [insert into order_items (item_id,item_name,quantity) values (?,?,?)]
17:58:16.390 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
17:58:16.393 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
17:58:16.396 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
17:58:19.848 [main] INFO  c.c.o.OrderManagementServiceApplication - Starting OrderManagementServiceApplication using Java 17.0.9 with PID 129804 (C:\Users\Serg\AtsonInternship\OrderManagementService\target\classes started by Serg in C:\Users\Serg\AtsonInternship)
17:58:19.850 [main] DEBUG c.c.o.OrderManagementServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
17:58:19.850 [main] INFO  c.c.o.OrderManagementServiceApplication - No active profile set, falling back to 1 default profile: "default"
17:58:20.276 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:58:20.316 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
17:58:20.672 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
17:58:20.680 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:58:20.681 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
17:58:20.722 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
17:58:20.722 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
17:58:20.808 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
17:58:20.941 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@16cb9989
17:58:20.942 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
17:58:21.042 [main] INFO  liquibase.database - Set default schema name to public
17:58:21.129 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:58:21.134 [main] INFO  liquibase.command - Dropping Database Objects in schema: order_management.public
17:58:21.246 [main] WARN  liquibase.executor - удаление распространяется на объект ограничение order_items_fk в отношении таблица orders
17:58:21.323 [main] INFO  liquibase.database - Successfully deleted all supported object types in schema order_management.public.
17:58:21.330 [main] WARN  liquibase.lockservice - Failed to release change log lock
17:58:21.332 [main] INFO  liquibase.command - Command execution complete
17:58:21.534 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
17:58:21.611 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:58:21.727 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
17:58:21.727 [main] INFO  liquibase.command - Using deploymentId: 9132301727
17:58:21.728 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
17:58:21.840 [main] INFO  liquibase.changelog - Table orders created
17:58:21.841 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderTable::admin ran successfully in 99ms
17:58:21.879 [main] INFO  liquibase.changelog - Table order_items created
17:58:21.880 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::createOrderItemTable::admin ran successfully in 35ms
17:58:21.884 [main] INFO  liquibase.changelog - Columns items_id(BIGINT) added to orders
17:58:21.884 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addItemsIdColumn::admin ran successfully in 1ms
17:58:21.889 [main] INFO  liquibase.changelog - NOT NULL constraint has been added to orders.user_id
17:58:21.892 [main] INFO  liquibase.changelog - Foreign key constraint added to orders (items_id)
17:58:21.892 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-master.xml::addForeignKeys::admin ran successfully in 5ms
17:58:21.896 [main] INFO  liquibase.util - UPDATE SUMMARY
17:58:21.896 [main] INFO  liquibase.util - Run:                          4
17:58:21.896 [main] INFO  liquibase.util - Previously run:               0
17:58:21.896 [main] INFO  liquibase.util - Filtered out:                 0
17:58:21.896 [main] INFO  liquibase.util - -------------------------------
17:58:21.896 [main] INFO  liquibase.util - Total change sets:            4
17:58:21.896 [main] INFO  liquibase.util - Update summary generated
17:58:21.897 [main] INFO  liquibase.command - Update command completed successfully.
17:58:21.898 [main] INFO  liquibase.lockservice - Successfully released change log lock
17:58:21.899 [main] INFO  liquibase.command - Command execution complete
17:58:21.947 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
17:58:21.999 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
17:58:22.027 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
17:58:22.205 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:58:22.902 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
17:58:22.905 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:58:23.096 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:58:23.390 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
17:58:23.397 [main] INFO  c.c.o.OrderManagementServiceApplication - Started OrderManagementServiceApplication in 3.875 seconds (process running for 4.365)
17:58:25.911 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:58:25.912 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
17:58:25.912 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
17:58:25.991 [http-nio-8081-exec-1] INFO  c.c.o.controller.OrderItemController - POST /api/orderItems: OrderItemDTO(id=null, itemName=название товара, quantity=2)
17:58:26.031 [http-nio-8081-exec-1] INFO  c.c.o.s.impl.OrderItemServiceImpl - Created new order with id: 1
17:58:29.598 [http-nio-8081-exec-5] INFO  c.c.o.controller.OrderController - POST /api/orders: OrderDTO(id=null, userId=3, itemsId=[], paymentStatus=PENDING, shipmentStatus=NOT_SHIPPED)
17:58:29.614 [http-nio-8081-exec-5] INFO  c.c.o.service.impl.OrderServiceImpl - Created new order with id: 1
17:59:01.408 [http-nio-8081-exec-4] INFO  c.c.o.controller.OrderController - GET /api/orders/1
17:59:01.451 [http-nio-8081-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
17:59:01.452 [http-nio-8081-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец ii1_0.item_id не существует
  Позиция: 17
17:59:01.455 [http-nio-8081-exec-4] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: Could not write JSON: JDBC exception executing SQL [select ii1_0.id,ii1_0.item_id from order_items ii1_0 where ii1_0.id=?] [ОШИБКА: столбец ii1_0.item_id не существует
  Позиция: 17] [n/a]
18:00:11.699 [http-nio-8081-exec-3] INFO  c.c.o.controller.OrderController - GET /api/orders/1
18:00:11.703 [http-nio-8081-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
18:00:11.703 [http-nio-8081-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец ii1_0.item_id не существует
  Позиция: 17
18:00:11.703 [http-nio-8081-exec-3] ERROR c.c.o.config.OrderControllerAdvice - An error occurred while creating a new order: Could not write JSON: JDBC exception executing SQL [select ii1_0.id,ii1_0.item_id from order_items ii1_0 where ii1_0.id=?] [ОШИБКА: столбец ii1_0.item_id не существует
  Позиция: 17] [n/a]
18:00:45.614 [http-nio-8081-exec-8] INFO  c.c.o.controller.OrderItemController - GET /api/orderItems/1
18:01:28.126 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
18:01:28.131 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
18:01:28.139 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
